// ç‚æœµè‰äº¤äº’ç»„ä»¶æ¼”ç¤º
// å±•ç¤ºä½¿ç”¨å±€éƒ¨scriptå—çš„äº¤äº’å¼ç»„ä»¶

Import @Interactive from "Chtholly.Interactive.*"
Import @Core from "Chtholly.Core.*"

div {
    class: "demo-container"
    
    h1 { "ç‚æœµè‰äº¤äº’ç»„ä»¶æ¼”ç¤º" }
    p { "ä½¿ç”¨å±€éƒ¨scriptå—å®ç°çš„ä¸°å¯Œäº¤äº’æ•ˆæœ" }
    
    // Tooltipæ¼”ç¤º
    section {
        h2 { "Tooltip æç¤ºæ¡†" }
        
        div {
            class: "demo-row"
            
            @Tooltip {
                content: "è¿™æ˜¯ä¸€ä¸ªé¡¶éƒ¨æç¤º"
                position: "top"
                
                @Button { "æ‚¬åœæ˜¾ç¤ºæç¤º" }
            }
            
            @Tooltip {
                content: "ç‚¹å‡»æ˜¾ç¤ºçš„æç¤º"
                position: "right"
                trigger: "click"
                
                @Button { type: "secondary"; "ç‚¹å‡»æ˜¾ç¤ºæç¤º" }
            }
            
            @Tooltip {
                content: "å»¶è¿Ÿ500msæ˜¾ç¤º"
                position: "bottom"
                delay: 500
                
                @Button { type: "danger"; "å»¶è¿Ÿæ˜¾ç¤ºæç¤º" }
            }
        }
    }
    
    // Dropdownæ¼”ç¤º
    section {
        h2 { "Dropdown ä¸‹æ‹‰èœå•" }
        
        div {
            class: "demo-row"
            
            @Dropdown {
                trigger: @Button { "é€‰æ‹©æ“ä½œ â–¼" }
                items: [
                    { label: "ç¼–è¾‘", value: "edit", icon: "âœï¸" },
                    { label: "å¤åˆ¶", value: "copy", icon: "ğŸ“‹" },
                    { label: "åˆ é™¤", value: "delete", icon: "ğŸ—‘ï¸", disabled: true },
                    { label: "å¯¼å‡º", value: "export", icon: "ğŸ“¤" }
                ]
                onSelect: (item) => {
                    alert(`é€‰æ‹©äº†: ${item.label}`);
                }
            }
            
            @Dropdown {
                trigger: @Button { type: "secondary"; "å³å¯¹é½èœå• â–¼" }
                align: "right"
                items: [
                    { label: "ä¸ªäººä¸­å¿ƒ", value: "profile" },
                    { label: "è´¦å·è®¾ç½®", value: "settings" },
                    { label: "é€€å‡ºç™»å½•", value: "logout" }
                ]
                onSelect: (item) => {
                    console.log("Selected:", item);
                }
            }
        }
    }
    
    // Modalæ¼”ç¤º
    section {
        h2 { "Modal æ¨¡æ€æ¡†" }
        
        div {
            class: "demo-row"
            id: "modal-demo"
            
            script {
                // æ¨¡æ€æ¡†çŠ¶æ€ç®¡ç†
                this.modalStates = {
                    basic: false,
                    centered: false,
                    noMask: false
                };
                
                this.openModal = (type) => {
                    this.modalStates[type] = true;
                    this.forceUpdate();
                };
                
                this.closeModal = (type) => {
                    this.modalStates[type] = false;
                    this.forceUpdate();
                };
                
                this.forceUpdate = () => {
                    // è§¦å‘é‡æ–°æ¸²æŸ“çš„é€»è¾‘
                    {{&}}->dispatchEvent(new Event('update'));
                };
            }
            
            @Button {
                onclick: () => this.openModal('basic')
                "æ‰“å¼€åŸºç¡€æ¨¡æ€æ¡†"
            }
            
            @Button {
                type: "secondary"
                onclick: () => this.openModal('centered')
                "å±…ä¸­æ¨¡æ€æ¡†"
            }
            
            @Button {
                type: "danger"
                onclick: () => this.openModal('noMask')
                "ä¸å¯ç‚¹å‡»é®ç½©å…³é—­"
            }
            
            // åŸºç¡€æ¨¡æ€æ¡†
            @Modal {
                open: this.modalStates.basic
                title: "åŸºç¡€æ¨¡æ€æ¡†"
                onClose: () => this.closeModal('basic')
                
                p { "è¿™æ˜¯ä¸€ä¸ªåŸºç¡€çš„æ¨¡æ€æ¡†ç¤ºä¾‹ã€‚" }
                p { "æŒ‰ESCé”®æˆ–ç‚¹å‡»å…³é—­æŒ‰é’®å¯ä»¥å…³é—­ã€‚" }
                
                div {
                    class: "modal-footer"
                    @Button { 
                        type: "secondary"
                        onclick: () => this.closeModal('basic')
                        "å–æ¶ˆ" 
                    }
                    @Button { 
                        onclick: () => {
                            alert("ç¡®è®¤æ“ä½œ");
                            this.closeModal('basic');
                        }
                        "ç¡®è®¤" 
                    }
                }
            }
            
            // å±…ä¸­æ¨¡æ€æ¡†
            @Modal {
                open: this.modalStates.centered
                title: "å±…ä¸­æ˜¾ç¤ºçš„æ¨¡æ€æ¡†"
                centered: true
                onClose: () => this.closeModal('centered')
                width: "400px"
                
                p { "è¿™ä¸ªæ¨¡æ€æ¡†ä¼šåœ¨å±å¹•ä¸­å¤®æ˜¾ç¤ºã€‚" }
                
                script {
                    // æ¨¡æ€æ¡†å†…çš„åŠ¨ç”»æ•ˆæœ
                    {{".modal-content-animation"}}->animate({
                        duration: 1000,
                        easing: 'ease-in-out',
                        begin: { opacity: 0, transform: 'translateY(20px)' },
                        end: { opacity: 1, transform: 'translateY(0)' },
                        loop: -1,
                        direction: 'alternate'
                    });
                }
                
                div {
                    class: "modal-content-animation"
                    style: {
                        padding: "20px"
                        background: "#f0f0f0"
                        borderRadius: "4px"
                        textAlign: "center"
                    }
                    "åŠ¨ç”»å†…å®¹"
                }
            }
            
            // ä¸å¯ç‚¹å‡»é®ç½©å…³é—­
            @Modal {
                open: this.modalStates.noMask
                title: "é‡è¦æ“ä½œç¡®è®¤"
                maskClosable: false
                onClose: () => this.closeModal('noMask')
                
                p { "âš ï¸ è¿™æ˜¯ä¸€ä¸ªé‡è¦æ“ä½œï¼Œç‚¹å‡»é®ç½©æ— æ³•å…³é—­ã€‚" }
                p { "åªèƒ½é€šè¿‡å…³é—­æŒ‰é’®æˆ–ç¡®è®¤/å–æ¶ˆæŒ‰é’®å…³é—­ã€‚" }
                
                div {
                    class: "modal-footer"
                    @Button { 
                        type: "danger"
                        onclick: () => this.closeModal('noMask')
                        "æˆ‘çŸ¥é“äº†" 
                    }
                }
            }
        }
    }
    
    // Tabsæ¼”ç¤º
    section {
        h2 { "Tabs é€‰é¡¹å¡" }
        
        @Tabs {
            items: [
                {
                    key: "intro",
                    label: "ç®€ä»‹",
                    content: div {
                        h3 { "ç‚æœµè‰Â·è¯ºå¡”Â·ç‘Ÿå°¼æ¬§é‡Œæ–¯" }
                        p { "ã€Œå³ä½¿æ˜¯å†å¾®å°çš„ç›¸é‡ä¸ç¦»åˆ«ï¼Œä¹Ÿä¼šåœ¨å¿ƒä¸­ç•™ä¸‹è‰²å½©ã€" }
                        p { "ç‚æœµè‰æ˜¯ä¸€ä½é»„é‡‘å¦–ç²¾ï¼Œæ‹¥æœ‰ç¾ä¸½çš„è“è‰²é•¿å‘å’Œæ¸©æŸ”çš„æ€§æ ¼ã€‚" }
                    }
                },
                {
                    key: "features",
                    label: "ç‰¹æ€§",
                    content: div {
                        h3 { "ç»„ä»¶ç‰¹æ€§" }
                        ul {
                            li { "ä½¿ç”¨å±€éƒ¨scriptå—å®ç°äº¤äº’" }
                            li { "æ”¯æŒCHTL JSå¢å¼ºè¯­æ³•" }
                            li { "å†…ç½®åŠ¨ç”»æ•ˆæœ" }
                            li { "å®Œå…¨å“åº”å¼è®¾è®¡" }
                        }
                    }
                },
                {
                    key: "code",
                    label: "ä»£ç ç¤ºä¾‹",
                    content: div {
                        h3 { "ä½¿ç”¨ç¤ºä¾‹" }
                        pre {
                            code {
                                `@Tooltip {
    content: "æç¤ºå†…å®¹"
    position: "top"
    
    @Button { "æ‚¬åœæˆ‘" }
}`
                            }
                        }
                    }
                },
                {
                    key: "disabled",
                    label: "ç¦ç”¨é¡¹",
                    disabled: true,
                    content: div { "è¿™ä¸ªé€‰é¡¹å¡è¢«ç¦ç”¨äº†" }
                }
            ]
            onChange: (key) => {
                console.log("åˆ‡æ¢åˆ°:", key);
            }
        }
        
        h3 { "å¡ç‰‡å¼é€‰é¡¹å¡" }
        
        @Tabs {
            type: "card"
            items: [
                {
                    key: "memory",
                    label: "è®°å¿†",
                    content: div {
                        p { "ç‚æœµè‰çš„è®°å¿†é€æ¸è¢«ä¾µèš€..." }
                        script {
                            // æ¸å˜åŠ¨ç”»æ•ˆæœ
                            {{&}}->animate({
                                duration: 3000,
                                easing: 'ease-in-out',
                                begin: { opacity: 1 },
                                when: [
                                    { at: 0.5, opacity: 0.3 }
                                ],
                                end: { opacity: 1 },
                                loop: -1
                            });
                        }
                    }
                },
                {
                    key: "happiness",
                    label: "å¹¸ç¦",
                    content: div {
                        p { "ã€Œèƒ½å¤Ÿé‡è§ä½ ï¼Œæ˜¯æˆ‘æœ€å¹¸ç¦çš„äº‹ã€" }
                        p { "å³ä½¿æ—¶é—´æœ‰é™ï¼Œæ¯ä¸€åˆ»éƒ½å€¼å¾—çæƒœã€‚" }
                    }
                }
            ]
        }
    }
    
    style {
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        section {
            margin-bottom: 60px;
            padding: 30px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #67C3CC;
            text-align: center;
            margin-bottom: 20px;
        }
        
        h2 {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #67C3CC;
        }
        
        .demo-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
            margin: 20px 0;
        }
        
        .modal-footer {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #f0f0f0;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        pre {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
        }
        
        code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
        }
        
        body {
            background: #f0f2f5;
            margin: 0;
        }
    }
}