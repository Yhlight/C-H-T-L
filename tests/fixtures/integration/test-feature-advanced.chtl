// 测试8: 高级特性（约束、原始嵌入、配置等）

// 配置部分
[Configuration] {
    INDEX_INITIAL_COUNT = 1;
    DEBUG_MODE = true;
    
    [Name] {
        CUSTOM_ELEMENT = [@Element, @元素, @Component];
        CUSTOM_STYLE = [@Style, @样式, @StyleSheet];
    }
}

// 原始嵌入
[Origin] @Html SvgIcon {
    <svg width="24" height="24" viewBox="0 0 24 24">
        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
    </svg>
}

[Origin] @JavaScript TrackingCode {
    // Google Analytics 示例
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-XXXXX-Y', 'auto');
    ga('send', 'pageview');
}

[Origin] @Style LegacyCss {
    /* 旧版 CSS 代码 */
    .legacy-component {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -ms-flex-direction: column;
        flex-direction: column;
    }
}

// 命名空间定义
[Namespace] MyApp {
    [Template] @Element Header {
        header {
            class: "app-header";
            h1 { text { "My Application" } }
            nav {
                ul {
                    li { a { href: "/"; text { "Home" } } }
                    li { a { href: "/about"; text { "About" } } }
                    li { a { href: "/contact"; text { "Contact" } } }
                }
            }
        }
    }
    
    [Template] @Style Colors {
        primary: #2c3e50;
        secondary: #3498db;
        accent: #e74c3c;
    }
}

// 约束（except）测试
[Custom] @Element ResponsiveCard {
    // 桌面版本
    div {
        class: "card desktop";
        style {
            width: 400px;
            padding: 20px;
        }
        h2 { text { "Desktop Card" } }
        p { text { "This is shown on desktop" } }
    } except mobile;
    
    // 移动版本
    div {
        class: "card mobile";
        style {
            width: 100%;
            padding: 10px;
        }
        h3 { text { "Mobile Card" } }
        p { text { "This is shown on mobile" } }
    } except desktop;
}

// 主体内容
body {
    // 使用原始嵌入
    div {
        class: "icon-container";
        [Origin] @Html SvgIcon;
    }
    
    // 使用命名空间中的组件
    @Element MyApp.Header;
    
    // 使用带约束的组件
    @Element ResponsiveCard;
    
    // 测试插槽（slot）
    div {
        class: "slot-container";
        slot { name: "header"; }
        slot { name: "content"; }
        slot { name: "footer"; }
    }
    
    // 使用旧版样式
    div {
        class: "legacy-component";
        text { "使用旧版样式" }
    }
    
    // 信息标记
    [Info] {
        author: "CHTL Test";
        version: "1.0.0";
        description: "Advanced features test";
    }
    
    // 脚本部分使用原始JavaScript
    script {
        [Origin] @JavaScript TrackingCode;
    }
    
    // 样式部分使用原始CSS
    style {
        [Origin] @Style LegacyCss;
        
        // 额外的样式
        .icon-container svg {
            fill: MyApp.Colors(primary);
        }
    }
}